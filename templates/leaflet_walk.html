<html>
  <head>
    <title>Mapping my walks</title>
  </head>

  <body>
    <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
    <script type="text/javascript" src="https://rawgit.com/jieter/Leaflet.encoded/master/Polyline.encoded.js"></script>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css" />
    <link href="/static/style.css" rel="stylesheet" type="text/css" />

    <img src="/static/strava-2.png" alt="Strava Logo" width="40" height="38">
    <button class="buttonVT" onclick="vtFunction()">VT</button>
    <button class="buttonKA" onclick="kaFunction()">KA</button>

    <nav id="nav" class="nav-main">
      <div id="map" style="width: 100%; height: 94%"></div>
    </nav>

    <script>
      var map = L.map('map');
      let vt_coords = {north : 43.0757, east : 25.6230};
      let ka_coords = {north : 49.0040, east : 8.4045};

      let vtFunction = function(){
        this.map.setView([vt_coords.north, vt_coords.east], 15);

        L.tileLayer(
            'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 18,
            }).addTo(map);

        var encodedRoutes = {{ walks|safe }};

        for (let encoded of encodedRoutes) {
          var coordinates = L.Polyline.fromEncoded(encoded).getLatLngs();

          L.polyline(
              coordinates,
               {
              color: 'green',
              weight: 2,
              opacity: .7,
              lineJoin: 'round',
          }
          ).addTo(map);
        }
      }

      let kaFunction = function(){
        this.map.setView([ka_coords.north, ka_coords.east], 14);

        L.tileLayer(
            'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 18,
            }).addTo(map);

        var encodedRoutes = {{ walks|safe }};

        for (let encoded of encodedRoutes) {
          var coordinates = L.Polyline.fromEncoded(encoded).getLatLngs();

          L.polyline(
              coordinates,
               {
              color: 'green',
              weight: 2,
              opacity: .7,
              lineJoin: 'round',
          }
          ).addTo(map);
        }
      }

    </script>
  </body>
</html>